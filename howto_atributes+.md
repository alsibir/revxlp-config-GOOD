

## 1 Атрибуты, начинающиеся с `&` (поведения ZMK), используемые в слоях

### 1.1 `&kp` — отправка кода клавиши

Назначение: передать на хост указанный код клавиши (нажатие/отпускание).
Формат: `&kp <код>` или `&kp <модификаторная функция>(<код>)`.
Примеры из слоёв: `&kp ESC`, `&kp PG_UP`, `&kp C_VOL_DN`, `&kp LG(LS(N4))`, `&kp LC(LEFT)`.

### 1.2 `&mt` — модификатор при удержании, код при коротком нажатии (mod-tap)

Назначение: при **tap** отправляется второй аргумент (код), при **hold** — первый аргумент (модификатор).
Формат: `&mt <модификатор> <код при tap>`.
Примеры: `&mt LCTRL TAB`, `&mt RALT GRAVE`.

### 1.3 `&lt` — слой при удержании, код при коротком нажатии (layer-tap)

Назначение: при **tap** отправляется второй аргумент (код), при **hold** — активируется слой (первый аргумент).
Формат: `&lt <идентификатор слоя> <код при tap>`.
Примеры: `&lt NAV_L RET`, `&lt MOU_L LGUI`.

### 1.4 `&mo` — включение слоя на удержании (momentary layer)

Назначение: активировать слой на время удержания клавиши.
Формат: `&mo <идентификатор слоя>`.
Примеры: `&mo NUM_L`, `&mo MED_L`, `&mo FUN_L`.

### 1.5 `&to` — переход на слой (переключение активного слоя)

Назначение: включить указанный слой как текущий (используется как «перейти на слой»).
Формат: `&to <идентификатор слоя>`.
Пример: `&to BASE_L`.

### 1.6 `&trans` — прозрачное назначение (наследование с нижнего слоя)

Назначение: не задавать действие на текущем слое; событие берётся с нижележащего активного слоя.
Формат: `&trans`.
Примеры: повсеместно в `Nav`, `Num`, `Adjust`, `Media`, `Mouse`.

### 1.7 `&bt` — команды Bluetooth

Назначение: управление BT-профилями/связями (очистка, выбор профиля и т. п.).
Формат: `&bt <команда> [параметр]`.
Примеры: `&bt BT_CLR`, `&bt BT_SEL 0 … &bt BT_SEL 4`.

### 1.8 `&out` — переключение канала вывода (USB/BLE)

Назначение: управление выходом ZMK (например, переключение USB/BLE).
Формат: `&out <команда>`.
Пример: `&out OUT_TOG`.

### 1.9 `&sys_reset` — системный сброс

Назначение: перезагрузка контроллера (сброс).
Формат: `&sys_reset`.
Пример: `&sys_reset` в `Adjust`.

### 1.10 `&bootloader` — переход в загрузчик

Назначение: перезагрузка с входом в режим загрузчика (для прошивки).
Формат: `&bootloader`.
Пример: `&bootloader` в `Adjust`.

### 1.11 `&mkp` — кнопка мыши (mouse key press)

Назначение: отправка на хост события кнопки мыши.
Формат: `&mkp <кнопка>`.
Примеры: `&mkp LCLK`, `&mkp RCLK`, `&mkp MCLK`.

### 1.12 `&mmv` — движение мыши (mouse move)

Назначение: отправка события перемещения курсора.
Формат: `&mmv <направление/команда>`.
Примеры: `&mmv MOVE_LEFT`, `&mmv MOVE_DOWN`, `&mmv MOVE_UP`, `&mmv MOVE_RIGHT`.

### 1.13 `&msc` — прокрутка (mouse scroll)

Назначение: отправка события прокрутки.
Формат: `&msc <направление/команда>`.
Примеры: `&msc SCRL_LEFT`, `&msc SCRL_DOWN`, `&msc SCRL_UP`, `&msc SCRL_RIGHT`.

### 1.14 `&shifty` — пользовательское поведение (tap-dance по метке)

Назначение: вызов пользовательского behavior, объявленного в `tap_dances` (в конфигурации — `shifty: shift_caps_word`).
Формат: `&shifty` (без аргументов).
Пример: `&shifty` на базовом слое в зоне «большого пальца».

---

## 2 Атрибуты после `&` (аргументы поведения), используемые в слоях

### 2.1 Идентификаторы слоёв (аргументы для `&mo`, `&lt`, `&to`)

Используются как числовые индексы слоёв, объявленные через `#define`.
Применение:

* `BASE_L` — базовый слой (в `&to BASE_L`)
* `NAV_L` — `Nav` (в `&lt NAV_L RET`)
* `NUM_L` — `Num` (в `&mo NUM_L`)
* `MED_L` — `Adjust` (в `&mo MED_L`)
* `FUN_L` — `Media` (в `&mo FUN_L`)
* `MOU_L` — `Mouse` (в `&lt MOU_L LGUI`)

### 2.2 Команды Bluetooth (аргументы для `&bt`)

* `BT_CLR` — очистка текущего профиля
* `BT_SEL <n>` — выбор профиля по номеру
  Примеры: `BT_SEL 0`, `BT_SEL 1`, `BT_SEL 2`, `BT_SEL 3`, `BT_SEL 4`.

### 2.3 Команды вывода (аргументы для `&out`)

* `OUT_TOG` — переключение канала вывода.

### 2.4 Модификаторы и «модификаторные функции»

Используются:

* как аргументы для `&mt`/`&lt` (например, `LCTRL`, `RALT`, `LGUI`);
* как «обёртки» внутри `&kp …`:

  * `LG(<код>)` — добавить модификатор LGUI (Super/Win/Command)
  * `LS(<код>)` — добавить модификатор Shift
  * `LC(<код>)` — добавить модификатор Ctrl
    Пример вложения: `LG(LS(N4))`.

Примечание по унификации: в сочетаниях вида `LC(LEFT)`/`LC(RIGHT)` рекомендуется использовать единый стиль кодов направления (предпочтительно `LEFT_ARROW`/`RIGHT_ARROW`), чтобы исключить неоднозначность алиасов.

### 2.5 Keycodes (аргументы для `&kp`, а также tap-аргументы для `&mt`/`&lt`)

В приведённых слоях используются следующие группы кодов:

1. Буквы и базовые символы:

* `A…Z`, `Q…P`, `N…M` и т. п.

2. Системные/редактирование:

* `ESC`, `TAB`, `RET`, `BSPC`, `SPACE`, `ENTER`

3. Навигация:

* `PG_UP`, `PG_DN`, `HOME`, `END`
* `UP_ARROW`, `DOWN_ARROW`, `LEFT_ARROW`, `RIGHT_ARROW`

4. Пунктуация и спецсимволы:

* `BSLH`, `FSLH`, `GRAVE`, `SEMI`, `SQT`, `COMMA`, `DOT`
* `EXCL`, `AT`, `HASH`, `DLLR`, `PRCNT`, `CARET`, `AMPS`, `COLON`, `UNDER`, `LPAR`, `RPAR`
* `LBRC`, `RBRC`, `LBKT`, `RBKT`

5. Keypad:

* `KP_MULTIPLY`, `KP_PLUS`, `KP_MINUS`, `KP_EQUAL`, `KP_N1`, `KP_N2`

6. Media (consumer):

* `C_VOL_UP`, `C_VOL_DN`, `C_MUTE`, `C_PREV`, `C_NEXT`, `C_PLAY_PAUSE`

7. Коды цифр:

* `N0…N9` (например, `N1`, `N2`, …)
* `N4` в `LG(LS(N4))` (цифра «4» с модификаторами)

### 2.6 Параметры мыши (аргументы для `&mkp`, `&mmv`, `&msc`)

* Для `&mkp`: `LCLK`, `RCLK`, `MCLK`
* Для `&mmv`: `MOVE_LEFT`, `MOVE_DOWN`, `MOVE_UP`, `MOVE_RIGHT`
* Для `&msc`: `SCRL_LEFT`, `SCRL_DOWN`, `SCRL_UP`, `SCRL_RIGHT`

---

## 3 Контрольные указания по применению

1. Для каждого `&<поведение>` необходимо соблюдать ожидаемое число аргументов:

* `&kp` — 1 аргумент (код или выражение `LG()/LS()/LC()`)
* `&mt` — 2 аргумента (mod, tap)
* `&lt` — 2 аргумента (layer, tap)
* `&mo`/`&to` — 1 аргумент (layer)
* `&trans`, `&sys_reset`, `&bootloader`, `&shifty` — без аргументов
* `&bt` — команда + (в отдельных командах) параметр
* `&mkp`/`&mmv`/`&msc` — 1 аргумент (кнопка/направление)

2. Для модификаторных функций (`LG/LS/LC`) необходимо использовать корректные keycodes в скобках и избегать смешения алиасов направлений (`LEFT`/`RIGHT`) с формами `*_ARROW` без заранее принятого правила.

3. Для `&mkp/&mmv/&msc` требуется выполнение предусловий, указанных в комментариях конфигурации (включение pointing и корректное обновление HID на стороне хоста при изменениях).
